{% extends "base.html" %}

{% block content %}
<div class="search-results">
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h2>

    <div class="search-info">
        <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "<strong>{{ query }}</strong>" –Ω–∞–π–¥–µ–Ω–æ:
           <span class="badge">{{ results_count }}</span></p>

        <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä—è–º–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <form action="{{ url_for('search') }}" method="GET" class="search-form">
            <input type="text" name="q" value="{{ query }}" placeholder="–ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–µ–π...">
            <button type="submit">–ò—Å–∫–∞—Ç—å</button>
        </form>
    </div>

    {% if results %}
        <div class="results-list">
            {% for news in results %}
            <div class="result-item">
                <h3>
                    <a href="{{ url_for('news_detail', news_id=news.id) }}">
                        {{ news.title }}
                    </a>
                </h3>

                <div class="result-meta">
                    <span class="date">
                        {{ news.created_at.strftime('%d.%m.%Y %H:%M') }}
                    </span>
                    {% if news.author %}
                        <span class="author">
                            –ê–≤—Ç–æ—Ä: {{ news.author.username }}
                        </span>
                    {% endif %}
                </div>

                <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—É—Å–æ—á–µ–∫ —Ç–µ–∫—Å—Ç–∞ -->
                <p class="result-excerpt">
                    {% if query|lower in news.content|lower %}
                        <!-- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ–∫—Å—Ç–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–∫—Ä—É–≥ –Ω–µ–≥–æ -->
                        ...{{ news.content|truncate(200) }}...
                    {% else %}
                        {{ news.content|truncate(200) }}
                    {% endif %}
                </p>

                <a href="{{ url_for('news_detail', news_id=news.id) }}" class="read-more">
                    –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí
                </a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-results">
            <p>üòï –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}"</p>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
            <ul>
                <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å–ª–æ–≤–∞</li>
                <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è</li>
                <li>–ò—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–æ–≤–æ –≤–º–µ—Å—Ç–æ —Ñ—Ä–∞–∑—ã</li>
            </ul>
            <a href="{{ url_for('news_list') }}" class="btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</a>
        </div>
    {% endif %}

    <div class="back-link">
        <a href="{{ url_for('news_list') }}">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π</a>
    </div>
</div>
{% endblock %}